<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Server Management - Mitchbot</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="guild-page">
  <!-- Top Navigation -->
  <nav class="navbar navbar--fixed">
    <div class="navbar__container">
      <div class="navbar__brand">
        <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"/>
            <line x1="3" y1="6" x2="21" y2="6"/>
            <line x1="3" y1="18" x2="21" y2="18"/>
          </svg>
        </button>
        <span class="navbar__logo">ü§ñ</span>
        <span class="navbar__title">Mitchbot</span>
      </div>
      <div class="navbar__nav">
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
          <span class="theme-toggle__icon">üåô</span>
        </button>
        <a href="/dashboard" class="btn btn-secondary btn-sm">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          </svg>
          Dashboard
        </a>
      </div>
    </div>
  </nav>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <div class="guild-layout">
    <!-- Sidebar -->
    <aside class="guild-sidebar" id="guild-sidebar">
      <div class="guild-sidebar__header">
        <div class="guild-sidebar__server">
          <div class="guild-sidebar__icon" id="sidebar-guild-icon">
            <div class="loading-spinner"></div>
          </div>
          <div class="guild-sidebar__info">
            <div class="guild-sidebar__name" id="sidebar-guild-name">Loading...</div>
            <div class="guild-sidebar__status">
              <span class="status-dot status-dot--success"></span>
              <span>Connected</span>
            </div>
          </div>
        </div>
      </div>

      <nav class="guild-sidebar__nav">
        <div class="guild-sidebar__section">
          <div class="guild-sidebar__section-title">Overview</div>
          <a href="#overview" class="guild-sidebar__link guild-sidebar__link--active" data-section="overview">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="9"/>
              <rect x="14" y="3" width="7" height="5"/>
              <rect x="14" y="12" width="7" height="9"/>
              <rect x="3" y="16" width="7" height="5"/>
            </svg>
            <span>Dashboard</span>
          </a>
          <a href="#" class="guild-sidebar__link" id="analytics-link" data-guild-href="/analytics.html?guild=">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="20" x2="18" y2="10"/>
              <line x1="12" y1="20" x2="12" y2="4"/>
              <line x1="6" y1="20" x2="6" y2="14"/>
            </svg>
            <span>Analytics</span>
          </a>
        </div>

        <div class="guild-sidebar__section">
          <div class="guild-sidebar__section-title">Moderation</div>
          <a href="#automod" class="guild-sidebar__link" data-section="automod">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
            <span>Automod</span>
          </a>
          <a href="#wordfilter" class="guild-sidebar__link" data-section="wordfilter">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
            </svg>
            <span>Word Filter</span>
          </a>
          <a href="#invitefilter" class="guild-sidebar__link" data-section="invitefilter">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
            </svg>
            <span>Invite Filter</span>
          </a>
          <a href="#linkfilter" class="guild-sidebar__link" data-section="linkfilter">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
            </svg>
            <span>Link Filter</span>
          </a>
          <a href="#spam" class="guild-sidebar__link" data-section="spam">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            <span>Spam Detection</span>
          </a>
        </div>

        <div class="guild-sidebar__section">
          <div class="guild-sidebar__section-title">Logging</div>
          <a href="#logging" class="guild-sidebar__link" data-section="logging">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
            </svg>
            <span>Mod Logs</span>
          </a>
          <a href="#logs-view" class="guild-sidebar__link" data-section="logs-view">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <span>View Logs</span>
          </a>
        </div>

        <div class="guild-sidebar__section">
          <div class="guild-sidebar__section-title">Features</div>
          <a href="#birthdays" class="guild-sidebar__link" data-section="birthdays">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            <span>Birthdays</span>
          </a>
          <a href="#economy" class="guild-sidebar__link" data-section="economy">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 6v6l4 2"/>
            </svg>
            <span>Economy</span>
          </a>
          <a href="#xp" class="guild-sidebar__link" data-section="xp">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
            </svg>
            <span>XP & Levels</span>
          </a>
        </div>
      </nav>

      <div class="guild-sidebar__footer">
        <div class="guild-sidebar__save-indicator" id="save-indicator">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
          <span>All changes saved</span>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="guild-content">
      <!-- Overview Section -->
      <section id="section-overview" class="guild-section guild-section--active">
        <div class="guild-section__header">
          <h1 class="guild-section__title" id="guild-name">Server Dashboard</h1>
          <p class="guild-section__description">Overview of your server's Mitchbot configuration</p>
        </div>

        <!-- Feature Health Cards -->
        <div class="health-cards">
          <div class="health-card-mini health-card-mini--success">
            <div class="health-card-mini__icon">‚úì</div>
            <div class="health-card-mini__content">
              <div class="health-card-mini__value" id="health-count-active">0</div>
              <div class="health-card-mini__label">Active Features</div>
            </div>
          </div>
          <div class="health-card-mini health-card-mini--warning">
            <div class="health-card-mini__icon">‚ö†</div>
            <div class="health-card-mini__content">
              <div class="health-card-mini__value" id="health-count-warning">0</div>
              <div class="health-card-mini__label">Needs Setup</div>
            </div>
          </div>
          <div class="health-card-mini health-card-mini--info">
            <div class="health-card-mini__icon">‚óã</div>
            <div class="health-card-mini__content">
              <div class="health-card-mini__value" id="health-count-inactive">0</div>
              <div class="health-card-mini__label">Inactive</div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
          <div class="card__header">
            <h3 class="card__title">Quick Actions</h3>
          </div>
          <div class="quick-actions">
            <button class="quick-action-btn" onclick="scrollToSection('automod')">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              </svg>
              <span>Enable Automod</span>
            </button>
            <button class="quick-action-btn" onclick="scrollToSection('logging')">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              </svg>
              <span>Setup Logging</span>
            </button>
            <button class="quick-action-btn" onclick="scrollToSection('wordfilter')">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
              </svg>
              <span>Add Word Filter</span>
            </button>
            <button class="quick-action-btn" onclick="scrollToSection('birthdays')">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              <span>Setup Birthdays</span>
            </button>
          </div>
        </div>
      </section>

      <!-- Automod Section -->
      <section id="section-automod" class="guild-section">
        <div class="card card--inactive" id="card-automod">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">üõ°Ô∏è</span>
                Automod
              </h3>
              <p class="card__subtitle">Automated moderation system</p>
            </div>
            <span class="status-badge status-badge--inactive" id="badge-automod">
              <span class="status-badge__dot"></span>
              <span>Disabled</span>
            </span>
          </div>

          <p class="card__description">
            Enable automated moderation to protect your server from spam, inappropriate content, and policy violations.
          </p>

          <label class="toggle-container">
            <input type="checkbox" class="toggle-input" id="automod-enabled">
            <span class="toggle-track">
              <span class="toggle-knob"></span>
            </span>
            <span class="toggle-label">Enable Automod</span>
          </label>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveAutomod()">Save Automod Settings</button>
          </div>
        </div>
      </section>

      <!-- Continue with rest of sections from original guild.html -->
      <section id="section-wordfilter" class="guild-section">
        <div class="card card--inactive" id="card-wordfilter">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">üö´</span>
                Word Filter
              </h3>
              <p class="card__subtitle" id="wordfilter-subtitle">No words configured</p>
            </div>
            <span class="status-badge status-badge--inactive" id="badge-wordfilter">
              <span class="status-badge__dot"></span>
              <span>Disabled</span>
            </span>
          </div>

          <p class="card__description">
            Automatically removes messages containing blocked words or phrases to keep your server clean and welcoming.
          </p>

          <div class="alert alert--warning" id="wordfilter-warning" style="display: none;">
            <span class="alert__icon">‚ö†</span>
            <div class="alert__content">
              <div class="alert__title">Needs Configuration</div>
              <div class="alert__message">Word filter is enabled but no words are configured. Add filtered words below.</div>
            </div>
          </div>

          <label class="toggle-container">
            <input type="checkbox" class="toggle-input" id="wordfilter-enabled">
            <span class="toggle-track">
              <span class="toggle-knob"></span>
            </span>
            <span class="toggle-label">Enable Word Filter</span>
          </label>

          <div class="form-group">
            <label class="form-label">Action</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Choose what happens when a user violates the word filter.
            </p>
            <select class="form-input" id="wordfilter-action">
              <option value="delete">Delete message and warn</option>
              <option value="warn">Warn user only</option>
              <option value="timeout">Timeout user</option>
              <option value="kick">Kick user</option>
              <option value="ban">Ban user</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Warning Threshold</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Number of warnings before escalating to timeout/kick.
            </p>
            <input type="number" class="form-input" id="wordfilter-threshold" min="1" max="10" value="3">
          </div>

          <div class="form-group">
            <label class="form-label">Filtered Words</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Messages containing these words will be automatically deleted and users will receive a warning.
            </p>
            <div class="tag-list" id="word-list"></div>
            <div class="tag-input-group">
              <input type="text" class="form-input" id="new-word" placeholder="Add a word or phrase...">
              <button class="btn btn-secondary" onclick="addWord()">Add Word</button>
            </div>
          </div>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveAutomod()">Save Changes</button>
          </div>
        </div>
      </section>

      <!-- Additional sections follow same pattern as original -->
      <!-- I'll include the key sections for brevity -->

      <section id="section-invitefilter" class="guild-section">
        <div class="card card--inactive" id="card-invitefilter">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">üîó</span>
                Invite Filter
              </h3>
              <p class="card__subtitle">Block Discord server invites</p>
            </div>
            <span class="status-badge status-badge--inactive" id="badge-invitefilter">
              <span class="status-badge__dot"></span>
              <span>Disabled</span>
            </span>
          </div>

          <p class="card__description">
            Blocks Discord server invites to prevent raid spam and unauthorized advertising in your community.
          </p>

          <label class="toggle-container">
            <input type="checkbox" class="toggle-input" id="invitefilter-enabled">
            <span class="toggle-track">
              <span class="toggle-knob"></span>
            </span>
            <span class="toggle-label">Block Server Invites</span>
          </label>

          <div class="form-group">
            <label class="form-label">Action</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Choose what happens when a user posts an invite link.
            </p>
            <select class="form-input" id="invitefilter-action">
              <option value="delete">Delete message and warn</option>
              <option value="warn">Warn user only</option>
              <option value="timeout">Timeout user</option>
              <option value="kick">Kick user</option>
              <option value="ban">Ban user</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Warning Threshold</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Number of warnings before escalating to timeout/kick.
            </p>
            <input type="number" class="form-input" id="invitefilter-threshold" min="1" max="10" value="3">
          </div>

          <div class="form-group">
            <label class="form-label">Exceptions</label>
            <label style="display: flex; align-items: center; gap: var(--space-2); margin-top: var(--space-3);">
              <input type="checkbox" id="allow-own-server">
              <span>Allow invites to this server</span>
            </label>
          </div>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveAutomod()">Save Changes</button>
          </div>
        </div>
      </section>

      <section id="section-linkfilter" class="guild-section">
        <div class="card card--inactive" id="card-linkfilter">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">üåê</span>
                Link Filter
              </h3>
              <p class="card__subtitle" id="linkfilter-subtitle">No domains configured</p>
            </div>
            <span class="status-badge status-badge--inactive" id="badge-linkfilter">
              <span class="status-badge__dot"></span>
              <span>Disabled</span>
            </span>
          </div>

          <p class="card__description">
            Control which links can be shared in your server using whitelists and blacklists.
          </p>

          <label class="toggle-container">
            <input type="checkbox" class="toggle-input" id="linkfilter-enabled">
            <span class="toggle-track">
              <span class="toggle-knob"></span>
            </span>
            <span class="toggle-label">Enable Link Filter</span>
          </label>

          <div class="form-group">
            <label class="form-label">Action</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Choose what happens when a user posts a blocked link.
            </p>
            <select class="form-input" id="linkfilter-action">
              <option value="delete">Delete message and warn</option>
              <option value="warn">Warn user only</option>
              <option value="timeout">Timeout user</option>
              <option value="kick">Kick user</option>
              <option value="ban">Ban user</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Warning Threshold</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Number of warnings before escalating to timeout/kick.
            </p>
            <input type="number" class="form-input" id="linkfilter-threshold" min="1" max="10" value="3">
          </div>

          <div class="form-group">
            <label class="form-label">Whitelisted Domains</label>
            <div class="tag-list" id="whitelist"></div>
            <div class="tag-input-group">
              <input type="text" class="form-input" id="new-whitelist" placeholder="Add domain...">
              <button class="btn btn-secondary" onclick="addWhitelist()">Add Domain</button>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Blacklisted Domains</label>
            <div class="tag-list" id="blacklist"></div>
            <div class="tag-input-group">
              <input type="text" class="form-input" id="new-blacklist" placeholder="Add domain...">
              <button class="btn btn-secondary" onclick="addBlacklist()">Add Domain</button>
            </div>
          </div>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveAutomod()">Save Changes</button>
          </div>
        </div>
      </section>

      <section id="section-spam" class="guild-section">
        <div class="card card--inactive" id="card-spam">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">‚ö°</span>
                Spam Detection
              </h3>
              <p class="card__subtitle">Automatic spam protection</p>
            </div>
            <span class="status-badge status-badge--inactive" id="badge-spam">
              <span class="status-badge__dot"></span>
              <span>Disabled</span>
            </span>
          </div>

          <p class="card__description">
            Detects and blocks spam messages including repeated messages, excessive caps, and mention spam.
          </p>

          <label class="toggle-container">
            <input type="checkbox" class="toggle-input" id="spam-enabled">
            <span class="toggle-track">
              <span class="toggle-knob"></span>
            </span>
            <span class="toggle-label">Enable Spam Detection</span>
          </label>

          <div class="form-group">
            <label class="form-label">Action</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Choose what happens when spam is detected.
            </p>
            <select class="form-input" id="spam-action">
              <option value="timeout">Timeout user</option>
              <option value="delete">Delete messages and warn</option>
              <option value="warn">Warn user only</option>
              <option value="kick">Kick user</option>
              <option value="ban">Ban user</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Timeout Duration (minutes)</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              How long to timeout users for spam violations.
            </p>
            <input type="number" class="form-input" id="spam-timeout-duration" min="1" max="1440" value="5">
          </div>

          <div class="form-group">
            <label class="form-label">Message Threshold</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Number of messages in the time window to trigger spam detection.
            </p>
            <input type="number" class="form-input" id="spam-message-threshold" min="3" max="20" value="5">
          </div>

          <div class="form-group">
            <label class="form-label">Time Window (seconds)</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Time period to count messages for spam detection.
            </p>
            <input type="number" class="form-input" id="spam-time-window" min="1" max="60" value="5">
          </div>

          <div class="form-group">
            <label class="form-label">Duplicate Message Threshold</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Number of identical messages to trigger spam detection.
            </p>
            <input type="number" class="form-input" id="spam-duplicate-threshold" min="2" max="10" value="3">
          </div>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveAutomod()">Save Changes</button>
          </div>
        </div>
      </section>

      <section id="section-mention-spam" class="guild-section">
        <div class="card card--inactive" id="card-mention-spam">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">@</span>
                Mention Spam Detection
              </h3>
              <p class="card__subtitle">Prevent excessive mentions</p>
            </div>
            <span class="status-badge status-badge--inactive" id="badge-mention-spam">
              <span class="status-badge__dot"></span>
              <span>Disabled</span>
            </span>
          </div>

          <p class="card__description">
            Automatically detects and takes action against messages with excessive user mentions.
          </p>

          <label class="toggle-container">
            <input type="checkbox" class="toggle-input" id="mention-spam-enabled">
            <span class="toggle-track">
              <span class="toggle-knob"></span>
            </span>
            <span class="toggle-label">Enable Mention Spam Detection</span>
          </label>

          <div class="form-group">
            <label class="form-label">Mention Threshold</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Maximum number of mentions allowed per message.
            </p>
            <input type="number" class="form-input" id="mention-spam-threshold" min="1" max="20" value="5">
          </div>

          <div class="form-group">
            <label class="form-label">Action</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Choose what happens when mention spam is detected.
            </p>
            <select class="form-input" id="mention-spam-action">
              <option value="delete">Delete message</option>
              <option value="warn">Warn user</option>
              <option value="timeout">Timeout user</option>
              <option value="kick">Kick user</option>
              <option value="ban">Ban user</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Warning Threshold</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Number of warnings before taking escalated action.
            </p>
            <input type="number" class="form-input" id="mention-spam-warn-threshold" min="1" max="10" value="2">
          </div>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveAutomod()">Save Changes</button>
          </div>
        </div>
      </section>

      <section id="section-caps-spam" class="guild-section">
        <div class="card card--inactive" id="card-caps-spam">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">üî†</span>
                Caps Spam Detection
              </h3>
              <p class="card__subtitle">Prevent excessive capitalization</p>
            </div>
            <span class="status-badge status-badge--inactive" id="badge-caps-spam">
              <span class="status-badge__dot"></span>
              <span>Disabled</span>
            </span>
          </div>

          <p class="card__description">
            Automatically detects and takes action against messages with excessive capital letters.
          </p>

          <label class="toggle-container">
            <input type="checkbox" class="toggle-input" id="caps-spam-enabled">
            <span class="toggle-track">
              <span class="toggle-knob"></span>
            </span>
            <span class="toggle-label">Enable Caps Spam Detection</span>
          </label>

          <div class="form-group">
            <label class="form-label">Caps Percentage (%)</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Percentage of message that must be capitalized to trigger detection.
            </p>
            <input type="number" class="form-input" id="caps-spam-percentage" min="10" max="100" value="70">
          </div>

          <div class="form-group">
            <label class="form-label">Minimum Length</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Minimum message length to check for caps spam (shorter messages ignored).
            </p>
            <input type="number" class="form-input" id="caps-spam-min-length" min="3" max="50" value="10">
          </div>

          <div class="form-group">
            <label class="form-label">Action</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Choose what happens when caps spam is detected.
            </p>
            <select class="form-input" id="caps-spam-action">
              <option value="delete">Delete message</option>
              <option value="warn">Warn user</option>
              <option value="timeout">Timeout user</option>
              <option value="kick">Kick user</option>
              <option value="ban">Ban user</option>
            </select>
          </div>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveAutomod()">Save Changes</button>
          </div>
        </div>
      </section>

      <section id="section-automod-whitelist" class="guild-section">
        <div class="card card--inactive" id="card-automod-whitelist">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">‚úÖ</span>
                Automod Whitelist
              </h3>
              <p class="card__subtitle">Roles and channels immune to automod</p>
            </div>
            <span class="status-badge status-badge--info" id="badge-automod-whitelist">
              <span class="status-badge__dot"></span>
              <span>Optional</span>
            </span>
          </div>

          <p class="card__description">
            Configure which roles and channels should be immune to automod. Members with whitelisted roles and messages in whitelisted channels will bypass all automod filters.
          </p>

          <div class="form-group">
            <label class="form-label">Whitelisted Roles</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Members with these roles will be immune to automod filters.
            </p>
            <div class="tag-list" id="whitelisted-roles-list"></div>
            <div class="tag-input-group">
              <select class="form-input" id="whitelist-role-select">
                <option value="">Select a role...</option>
              </select>
              <button class="btn btn-secondary" onclick="addWhitelistedRole()">Add Role</button>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Whitelisted Channels</label>
            <p class="helper-text">
              <span class="helper-text__icon">‚ÑπÔ∏è</span>
              Automod will be disabled in these channels.
            </p>
            <div class="tag-list" id="whitelisted-channels-list"></div>
            <div class="tag-input-group">
              <select class="form-input" id="whitelist-channel-select">
                <option value="">Select a channel...</option>
              </select>
              <button class="btn btn-secondary" onclick="addWhitelistedChannel()">Add Channel</button>
            </div>
          </div>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveAutomod()">Save Changes</button>
          </div>
        </div>
      </section>

      <section id="section-logging" class="guild-section">
        <div class="card card--inactive" id="card-logging">
          <div class="card__header">
            <div>
              <h3 class="card__title">
                <span class="card__icon">üìã</span>
                Moderation Logs
              </h3>
              <p class="card__subtitle">Track all moderation actions</p>
            </div>
            <span class="status-badge status-badge--inactive" id="badge-logging">
              <span class="status-badge__dot"></span>
              <span>Disabled</span>
            </span>
          </div>

          <p class="card__description">
            Log all moderation actions, automod violations, and administrative events to a designated channel.
          </p>

          <div class="form-group">
            <label class="form-label">Moderation Log Channel</label>
            <select class="form-select" id="log-channel">
              <option value="">None - Disable Logging</option>
            </select>
          </div>

          <div class="mt-6">
            <button class="btn btn-primary" onclick="saveSettings()">Save Logging Settings</button>
          </div>
        </div>
      </section>

      <section id="section-logs-view" class="guild-section">
        <div class="card">
          <div class="card__header">
            <h3 class="card__title">
              <span class="card__icon">üìú</span>
              Recent Moderation Actions
            </h3>
          </div>

          <div id="logs-container">
            <div class="loading">Loading moderation logs...</div>
          </div>
        </div>
      </section>

      <section id="section-birthdays" class="guild-section">
        <div class="card">
          <div class="card__header">
            <h3 class="card__title">
              <span class="card__icon">üéÇ</span>
              Birthday Notifications
            </h3>
          </div>

          <p class="card__description">
            Automatically celebrate member birthdays with announcements and special roles.
          </p>

          <!-- Birthday Configuration -->
          <div class="form-group">
            <h4 class="section-subtitle">Configuration</h4>

            <label class="toggle-label" for="birthday-enabled">
              <input type="checkbox" id="birthday-enabled" class="toggle-input" />
              <span class="toggle-slider"></span>
              <span class="toggle-text">Enable Birthday Notifications</span>
            </label>

            <div id="birthday-config-options" style="display: none; margin-top: 1rem;">
              <div class="form-group">
                <label for="birthday-channel">Announcement Channel</label>
                <select id="birthday-channel" class="form-input">
                  <option value="">Select a channel...</option>
                </select>
                <p class="form-help">Channel where birthday announcements will be posted</p>
              </div>

              <div class="form-group">
                <label for="birthday-role">Birthday Role (Optional)</label>
                <select id="birthday-role" class="form-input">
                  <option value="">No role</option>
                </select>
                <p class="form-help">Role to assign to members on their birthday (removed after 24 hours)</p>
              </div>

              <div class="form-group">
                <label for="birthday-message">Custom Message</label>
                <textarea
                  id="birthday-message"
                  class="form-input"
                  rows="3"
                  placeholder="Happy Birthday, {mention}! üéâ"
                ></textarea>
                <p class="form-help">
                  Available placeholders: {mention}, {username}, {user}<br>
                  Example: "Happy Birthday, {mention}! Have an amazing day! üéÇ"
                </p>
              </div>

              <button id="save-birthday-config" class="btn btn--primary">
                Save Configuration
              </button>
            </div>
          </div>

          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border);">

          <!-- Add Birthday Form -->
          <div class="form-group">
            <h4 class="section-subtitle">Add Birthday</h4>

            <div style="display: flex; gap: 1rem; align-items: flex-end;">
              <div style="flex: 1;">
                <label for="birthday-user-id">User ID</label>
                <input
                  type="text"
                  id="birthday-user-id"
                  class="form-input"
                  placeholder="123456789012345678"
                />
              </div>

              <div style="flex: 1;">
                <label for="birthday-date">Birthday (MM-DD)</label>
                <input
                  type="text"
                  id="birthday-date"
                  class="form-input"
                  placeholder="01-15"
                  pattern="\d{2}-\d{2}"
                />
              </div>

              <button id="add-birthday-btn" class="btn btn--primary">
                Add Birthday
              </button>
            </div>
            <p class="form-help">Enter the user ID and birthday in MM-DD format (e.g., 01-15 for January 15th)</p>
          </div>

          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border);">

          <!-- Birthdays List -->
          <div class="form-group">
            <h4 class="section-subtitle">Registered Birthdays</h4>
            <div id="birthdays-container">
              <div class="loading">Loading birthday data...</div>
            </div>
          </div>
        </div>
      </section>

      <section id="section-economy" class="guild-section">
        <div class="card">
          <div class="card__header">
            <h3 class="card__title">
              <span class="card__icon">üí∞</span>
              Economy System
              <span class="badge" id="economy-status-badge">Active</span>
            </h3>
          </div>

          <p class="card__description">
            Configure your server's economy system including currency, daily rewards, and more.
          </p>

          <div class="form-group">
            <label class="toggle-switch">
              <input type="checkbox" id="economy-enabled" onchange="updateEconomyStatus()">
              <span class="toggle-switch__slider"></span>
              <span class="toggle-switch__label">Enable Economy System</span>
            </label>
          </div>

          <div id="economy-settings">
            <div class="form-group">
              <label class="form-label" for="currency-name">
                Currency Name
                <span class="form-hint">What users will earn and spend (e.g., "coins", "credits", "gold")</span>
              </label>
              <input type="text" class="form-input" id="currency-name" placeholder="coins" maxlength="50">
            </div>

            <div class="form-group">
              <label class="form-label" for="currency-symbol">
                Currency Symbol
                <span class="form-hint">Emoji or symbol to represent your currency</span>
              </label>
              <input type="text" class="form-input" id="currency-symbol" placeholder="üí∞" maxlength="10">
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="daily-reward">
                  Daily Reward Amount
                  <span class="form-hint">How much currency users receive with /daily</span>
                </label>
                <input type="number" class="form-input" id="daily-reward" min="0" max="1000000" placeholder="100">
              </div>

              <div class="form-group">
                <label class="form-label" for="daily-cooldown">
                  Daily Cooldown (hours)
                  <span class="form-hint">Time between /daily claims (1-168 hours)</span>
                </label>
                <input type="number" class="form-input" id="daily-cooldown" min="1" max="168" placeholder="24">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="work-reward-min">
                  Work Reward (Min)
                  <span class="form-hint">Minimum payout for /work command</span>
                </label>
                <input type="number" class="form-input" id="work-reward-min" min="1" max="10000" placeholder="50">
              </div>

              <div class="form-group">
                <label class="form-label" for="work-reward-max">
                  Work Reward (Max)
                  <span class="form-hint">Maximum payout for /work command</span>
                </label>
                <input type="number" class="form-input" id="work-reward-max" min="1" max="10000" placeholder="150">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="work-cooldown">
                  Work Cooldown (minutes)
                  <span class="form-hint">Time between /work uses (1-1440 minutes)</span>
                </label>
                <input type="number" class="form-input" id="work-cooldown" min="1" max="1440" placeholder="60">
              </div>

              <div class="form-group">
                <label class="form-label" for="starting-balance">
                  Starting Balance
                  <span class="form-hint">Initial currency for new members</span>
                </label>
                <input type="number" class="form-input" id="starting-balance" min="0" max="100000" placeholder="100">
              </div>
            </div>

            <div class="mt-6">
              <button class="btn btn-primary" onclick="saveEconomySettings()">Save Economy Settings</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Economy Shop Section -->
      <section id="section-shop" class="guild-section">
        <div class="card">
          <div class="card__header">
            <h3 class="card__title">
              <span class="card__icon">üõí</span>
              Economy Shop
            </h3>
          </div>

          <p class="card__description">
            Manage shop items that users can purchase with currency. Create items or roles that players can buy.
          </p>

          <div class="mb-4">
            <button class="btn btn-primary" onclick="openAddShopItemModal()">Add Shop Item</button>
          </div>

          <div id="shop-items-list">
            <p class="text-gray-500">Loading shop items...</p>
          </div>
        </div>
      </section>

      <!-- Add Shop Item Modal -->
      <div id="add-shop-item-modal" class="modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">Add Shop Item</h3>
            <button class="modal-close" onclick="closeAddShopItemModal()">&times;</button>
          </div>

          <div class="modal-body">
            <div class="form-group">
              <label class="form-label" for="shop-item-name">Item Name</label>
              <input type="text" class="form-input" id="shop-item-name" placeholder="Cool Item" required>
            </div>

            <div class="form-group">
              <label class="form-label" for="shop-item-description">Description</label>
              <textarea class="form-input" id="shop-item-description" placeholder="A cool item that does something" rows="3"></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="shop-item-price">Price</label>
                <input type="number" class="form-input" id="shop-item-price" min="0" placeholder="100" required>
              </div>

              <div class="form-group">
                <label class="form-label" for="shop-item-stock">
                  Stock
                  <span class="form-hint">-1 for unlimited</span>
                </label>
                <input type="number" class="form-input" id="shop-item-stock" min="-1" placeholder="-1" value="-1">
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="shop-item-type">Item Type</label>
              <select class="form-input" id="shop-item-type" onchange="toggleRoleSelect()">
                <option value="item">Regular Item</option>
                <option value="role">Role (Auto-assign)</option>
              </select>
            </div>

            <div class="form-group" id="shop-item-role-group" style="display: none;">
              <label class="form-label" for="shop-item-role">Role to Assign</label>
              <select class="form-input" id="shop-item-role">
                <option value="">Select a role...</option>
              </select>
            </div>
          </div>

          <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeAddShopItemModal()">Cancel</button>
            <button class="btn btn-primary" onclick="saveShopItem()">Add Item</button>
          </div>
        </div>
      </div>

      <!-- XP & Levels Section -->
      <section id="section-xp" class="guild-section">
        <div class="card">
          <div class="card__header">
            <h3 class="card__title">
              <span class="card__icon">‚≠ê</span>
              XP & Leveling System
              <span class="badge" id="xp-status-badge">Active</span>
            </h3>
          </div>

          <p class="card__description">
            Reward members for participating in your server with XP, levels, and role rewards.
          </p>

          <!-- Enable/Disable Toggle -->
          <div class="form-group">
            <label class="toggle-switch">
              <input type="checkbox" id="xp-enabled" onchange="updateXPStatus()">
              <span class="toggle-switch__slider"></span>
              <span class="toggle-switch__label">Enable XP System</span>
            </label>
          </div>

          <div id="xp-settings">
            <!-- Basic XP Settings -->
            <div class="card__section">
              <h4 class="card__section-title">XP Configuration</h4>

              <div class="form-row">
                <div class="form-group">
                  <label class="form-label" for="xp-min">
                    Min XP Per Message
                    <span class="form-hint">Minimum XP awarded per message (1-100)</span>
                  </label>
                  <input type="number" class="form-input" id="xp-min" min="1" max="100" placeholder="10">
                </div>

                <div class="form-group">
                  <label class="form-label" for="xp-max">
                    Max XP Per Message
                    <span class="form-hint">Maximum XP awarded per message (1-100)</span>
                  </label>
                  <input type="number" class="form-input" id="xp-max" min="1" max="100" placeholder="20">
                </div>
              </div>

              <div class="form-group">
                <label class="form-label" for="xp-cooldown">
                  XP Cooldown (seconds)
                  <span class="form-hint">Time between XP gains (0-3600 seconds)</span>
                </label>
                <input type="number" class="form-input" id="xp-cooldown" min="0" max="3600" placeholder="60">
              </div>
            </div>

            <!-- Level-Up Announcements -->
            <div class="card__section">
              <h4 class="card__section-title">Level-Up Announcements</h4>

              <div class="form-group">
                <label class="toggle-switch">
                  <input type="checkbox" id="xp-announce-levelup">
                  <span class="toggle-switch__slider"></span>
                  <span class="toggle-switch__label">Announce Level-Ups</span>
                </label>
              </div>

              <div class="form-group">
                <label class="form-label" for="xp-levelup-channel">
                  Level-Up Channel
                  <span class="form-hint">Channel for level-up announcements (leave empty for same channel)</span>
                </label>
                <select class="form-input" id="xp-levelup-channel">
                  <option value="">Same channel as message</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label" for="xp-levelup-message">
                  Level-Up Message
                  <span class="form-hint">Use {user}, {level}, {xp} as placeholders</span>
                </label>
                <textarea class="form-input" id="xp-levelup-message" rows="2" placeholder="üéâ {user} just reached **Level {level}**! Keep it up!"></textarea>
              </div>
            </div>

            <!-- Level Role Rewards -->
            <div class="card__section">
              <h4 class="card__section-title">Level Role Rewards</h4>
              <p class="form-hint mb-4">Automatically assign roles when members reach specific levels</p>

              <div class="form-row">
                <div class="form-group">
                  <label class="form-label" for="level-role-level">Level</label>
                  <input type="number" class="form-input" id="level-role-level" min="1" max="1000" placeholder="5">
                </div>

                <div class="form-group">
                  <label class="form-label" for="level-role-role">Role</label>
                  <select class="form-input" id="level-role-role">
                    <option value="">Select a role...</option>
                  </select>
                </div>

                <div class="form-group" style="display: flex; align-items: flex-end;">
                  <button class="btn btn-secondary" onclick="addLevelRole()">Add Reward</button>
                </div>
              </div>

              <div id="level-roles-list" class="mt-4">
                <div class="loading">Loading level rewards...</div>
              </div>
            </div>

            <!-- XP Leaderboard -->
            <div class="card__section">
              <h4 class="card__section-title">XP Leaderboard</h4>
              <div id="xp-leaderboard" class="mt-4">
                <div class="loading">Loading leaderboard...</div>
              </div>
            </div>

            <!-- Advanced Settings -->
            <div class="card__section">
              <h4 class="card__section-title">Advanced Settings</h4>

              <div class="form-group">
                <label class="form-label">
                  XP Gain Channels
                  <span class="form-hint">If set, only these channels will give XP (leave empty for all channels)</span>
                </label>
                <div id="xp-gain-channels-list" class="role-list">
                  <div class="form-hint">No channels selected (all channels give XP)</div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">
                  No XP Channels
                  <span class="form-hint">Channels that won't give XP</span>
                </label>
                <div id="no-xp-channels-list" class="role-list">
                  <div class="form-hint">No channels blacklisted</div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">
                  No XP Roles
                  <span class="form-hint">Users with these roles won't gain XP</span>
                </label>
                <div id="no-xp-roles-list" class="role-list">
                  <div class="form-hint">No roles blacklisted</div>
                </div>
              </div>
            </div>

            <!-- Save Button -->
            <div class="mt-6">
              <button class="btn btn-primary" onclick="saveXPSettings()">Save XP Settings</button>
              <button class="btn btn-secondary ml-2" onclick="loadXPConfig()">Reset Changes</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="/js/theme.js"></script>
  <script src="/js/guild.js"></script>
</body>
</html>
